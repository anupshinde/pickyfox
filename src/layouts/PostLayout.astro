---
import BaseLayout from './BaseLayout.astro';
const { entry } = Astro.props;
const data = entry.data;
const og = {
  title: data.ogTitle || data.metaTitle || data.title,
  description: data.ogDescription || data.metaDescription || data.excerpt,
  image: data.ogImage || data.featureImage
};
const twitter = {
  title: data.twitterTitle || data.metaTitle || data.title,
  description: data.twitterDescription || data.metaDescription || data.excerpt,
  image: data.twitterImage || data.featureImage
};
---
<BaseLayout
  title={data.metaTitle || data.title}
  description={data.metaDescription || data.excerpt}
  canonicalUrl={data.canonicalUrl}
  og={og}
  twitter={twitter}
  codeinjection_head={data.codeinjection_head}
  codeinjection_foot={data.codeinjection_foot}
>
  <article class="mx-auto max-w-3xl py-12">
    <header class="space-y-3">
      {data.tags?.length && (
        <p class="text-sm font-semibold uppercase tracking-[0.08em] text-brand-500">{data.tags[0]}</p>
      )}
      <h1 class="text-3xl font-extrabold tracking-tight text-slate-900 sm:text-4xl">{data.title}</h1>
      <p class="text-sm text-slate-500">
        {new Date(data.date).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}
      </p>
      {data.excerpt && <p class="text-[20px] leading-[34px] text-slate-500">{data.excerpt}</p>}
    </header>
    {data.featureImage && (
      <figure class="my-8 space-y-2">
        <img
          class="w-full rounded-2xl border border-slate-200 shadow-sm"
          src={data.featureImage}
          alt={data.featureImageAlt || data.title}
        />
        {data.featureImageCaption && (
          <figcaption class="text-sm text-slate-500" set:html={data.featureImageCaption} />
        )}
      </figure>
    )}
    <div class="prose prose-slate max-w-none">
      <slot />
    </div>
  </article>
</BaseLayout>
