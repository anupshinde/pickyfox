---
import type { CollectionEntry } from 'astro:content';

interface Props {
  posts: CollectionEntry<'posts'>[];
  class?: string;
}

const { posts, class: className = 'grid gap-6 sm:grid-cols-2 lg:grid-cols-3' } = Astro.props as Props;
const formatDate = (value: string | undefined) =>
  new Date(value || '').toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
---
<section class={className}>
  {posts.map((post) => (
    <article class="overflow-hidden rounded-2xl border border-slate-200 bg-white shadow-sm transition hover:-translate-y-1 hover:shadow-lg">
      {post.data.featureImage && (
        <img
          class="h-48 w-full object-cover"
          src={post.data.featureImage}
          alt={post.data.featureImageAlt || post.data.title}
        />
      )}
      <div class="space-y-3 p-5">
        <h3 class="text-lg font-semibold text-slate-900">
          <a class="transition hover:text-slate-700" href={`/${post.slug}/`}>{post.data.title}</a>
        </h3>
        <p class="text-xs uppercase tracking-[0.08em] text-slate-500">{formatDate(post.data.date)}</p>
        {post.data.excerpt && <p class="text-sm leading-relaxed text-slate-600">{post.data.excerpt}</p>}
      </div>
    </article>
  ))}
</section>
